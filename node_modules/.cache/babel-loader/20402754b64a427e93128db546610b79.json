{"ast":null,"code":"import _regeneratorRuntime from\"D:\\\\Sibdev\\\\1\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"D:\\\\Sibdev\\\\1\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _toConsumableArray from\"D:\\\\Sibdev\\\\1\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"D:\\\\Sibdev\\\\1\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\Sibdev\\\\1\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"D:\\\\Sibdev\\\\1\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"D:\\\\Sibdev\\\\1\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _inherits from\"D:\\\\Sibdev\\\\1\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React from'react';import'./css/Home.css';import Header from'./Header/Header';import Main from'./Main/Main';import Favorites from'./Favorites/Favorites';var api_key=\"AIzaSyDP-tyPRpCpxxjgQijsrXvD3iiUUNlnUJg\";var max_result=50;var Home=/*#__PURE__*/function(_React$Component){_inherits(Home,_React$Component);function Home(){var _getPrototypeOf2;var _this;_classCallCheck(this,Home);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(Home)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={route:\"/Home\",searchQuery:\"\",searchQueryFilterBar:\"\",searchQueryMas:[],videoList:[],totalResults:\"\",x4:true,x1:false,indicatorFavorites:false,indicatorPopUpWindow:true};_this.changeRouteHome=function(event){_this.setState({route:\"/Home\"});};_this.changeRouteFavorites=function(event){_this.setState({route:\"/Favorites\"});};_this.changeRouteExit=function(event){_this.setState({route:\"/\"});localStorage.clear();};_this.inputSearchQuery=function(event){_this.setState({searchQuery:event.target.value});};_this.changeIndicatorFilterX4=function(event){_this.setState({x4:true,x1:false});};_this.changeIndicatorFilterX1=function(event){_this.setState({x4:false,x1:true});};_this.changeIndicatorFavorites=function(event){if(_this.state.searchQueryFilterBar!==\"\"){// если есть значение в фильтр баре\n_this.setState({indicatorFavorites:!event.target.checked});// то разрешай добавлять в избранное\nif(_this.state.indicatorPopUpWindow===false){// если нет всплывающего окна\n_this.setState({indicatorPopUpWindow:true});// вызывай его\n}if(!_this.state.indicatorFavorites===true&&!_this.state.searchQueryMas.includes(_this.state.searchQueryFilterBar)){// если нажата кнопка добавить в избранное и значения нет в массиве\n_this.setState(function(prevState){return{searchQueryMas:[].concat(_toConsumableArray(prevState.searchQueryMas),[_this.state.searchQueryFilterBar])// добавляй запись в массив\n};});}}};_this.changeIndicatorPopupWindow=function(event){if(_this.state.indicatorFavorites===true){_this.setState({indicatorPopUpWindow:false});}};_this.getListVideos=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var searchQuery,apiUrl,data,items,videoList,i;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();searchQuery=_this.state.searchQuery;_context.next=4;return fetch(\"https://cors-anywhere.herokuapp.com/https://www.googleapis.com/youtube/v3/search?part=snippet&q=\".concat(searchQuery,\"&type=video&maxResults=\").concat(max_result,\"&key=\").concat(api_key));case 4:apiUrl=_context.sent;_context.next=7;return apiUrl.json();case 7:data=_context.sent;_this.setState({totalResults:data.pageInfo.totalResults});items=data.items;videoList=[];for(i=0;i<items.length;i++){videoList[i]=[items[i].snippet.thumbnails.medium.url,items[i].snippet.title,items[i].snippet.channelTitle];}_this.setState({videoList:videoList,searchQueryFilterBar:_this.state.searchQuery});case 13:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();return _this;}_createClass(Home,[{key:\"render\",value:function render(){return React.createElement(\"div\",{className:\"Home\"},React.createElement(Header,{route:this.state.route,changeRouteHome:this.changeRouteHome,changeRouteFavorites:this.changeRouteFavorites,changeRouteExit:this.changeRouteExit}),this.state.route===\"/Home\"?React.createElement(Main// Высплывающее окно\n,{indicatorFavorites:this.state.indicatorFavorites,changeIndicatorPopupWindow:this.changeIndicatorPopupWindow,indicatorPopUpWindow:this.state.indicatorPopUpWindow// Строка поиска\n,searchQuery:this.state.searchQuery,inputSearchQuery:this.inputSearchQuery,getListVideos:this.getListVideos,changeIndicatorFavorites:this.changeIndicatorFavorites// Фильтр бар\n,searchQueryFilterBar:this.state.searchQueryFilterBar,totalResults:this.state.totalResults,changeIndicatorFilterX4:this.changeIndicatorFilterX4,changeIndicatorFilterX1:this.changeIndicatorFilterX1// Таблица видео\n,videoList:this.state.videoList,x4:this.state.x4,x1:this.state.x1}):React.createElement(Favorites,{searchQueryMas:this.state.searchQueryMas}));}}]);return Home;}(React.Component);export default Home;","map":{"version":3,"sources":["D:/Sibdev/1/src/pages/Home/Home.js"],"names":["React","Header","Main","Favorites","api_key","max_result","Home","state","route","searchQuery","searchQueryFilterBar","searchQueryMas","videoList","totalResults","x4","x1","indicatorFavorites","indicatorPopUpWindow","changeRouteHome","event","setState","changeRouteFavorites","changeRouteExit","localStorage","clear","inputSearchQuery","target","value","changeIndicatorFilterX4","changeIndicatorFilterX1","changeIndicatorFavorites","checked","includes","prevState","changeIndicatorPopupWindow","getListVideos","preventDefault","fetch","apiUrl","json","data","pageInfo","items","i","length","snippet","thumbnails","medium","url","title","channelTitle","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport './css/Home.css'\r\n\r\nimport Header from './Header/Header'\r\nimport Main from './Main/Main'\r\nimport Favorites from './Favorites/Favorites'\r\n\r\nconst api_key=\"AIzaSyDP-tyPRpCpxxjgQijsrXvD3iiUUNlnUJg\"\r\nconst max_result=50\r\n\r\nclass Home extends React.Component {\r\n  state = {\r\n    route: \"/Home\",\r\n    searchQuery: \"\",\r\n    searchQueryFilterBar: \"\",\r\n    searchQueryMas: [],\r\n    videoList: [],\r\n    totalResults: \"\",\r\n    x4: true,\r\n    x1: false,\r\n    indicatorFavorites: false,\r\n    indicatorPopUpWindow: true\r\n  }\r\n  // Переключение кнопок навигации\r\n  changeRouteHome = event => {\r\n    this.setState({ route: \"/Home\" });\r\n  }\r\n  changeRouteFavorites = event => {\r\n    this.setState({ route: \"/Favorites\" });\r\n  }\r\n  changeRouteExit = event => {\r\n    this.setState({ route: \"/\" });\r\n    localStorage.clear()\r\n  }\r\n  // Считывание поискового запроса\r\n  inputSearchQuery = event => {\r\n    this.setState({ searchQuery: event.target.value });\r\n  }\r\n  // Фильтры на вывод таблицы видео\r\n  changeIndicatorFilterX4 = event => {\r\n    this.setState({x4: true, x1: false})\r\n  }\r\n  changeIndicatorFilterX1 = event => {\r\n    this.setState({x4: false, x1: true})\r\n  }\r\n  // Добавление в избранное\r\n  changeIndicatorFavorites = event => {\r\n    if (this.state.searchQueryFilterBar!==\"\") { // если есть значение в фильтр баре\r\n      this.setState({indicatorFavorites: !event.target.checked}) // то разрешай добавлять в избранное\r\n      if (this.state.indicatorPopUpWindow===false) { // если нет всплывающего окна\r\n        this.setState({indicatorPopUpWindow: true}) // вызывай его\r\n      }\r\n      if (!this.state.indicatorFavorites===true && !this.state.searchQueryMas.includes(this.state.searchQueryFilterBar)) { // если нажата кнопка добавить в избранное и значения нет в массиве\r\n        this.setState(prevState => ({\r\n          searchQueryMas: [...prevState.searchQueryMas, this.state.searchQueryFilterBar] // добавляй запись в массив\r\n        }))\r\n      }\r\n    }\r\n  }\r\n  // Изменение индикатора всплывающего окна, когда нажата кнопка добавить в избранное\r\n  changeIndicatorPopupWindow = event => {\r\n    if (this.state.indicatorFavorites===true) {\r\n      this.setState({indicatorPopUpWindow: false})\r\n    }\r\n  }\r\n  // Получение списка видео\r\n  getListVideos = async (event) => {\r\n    event.preventDefault()\r\n    let searchQuery = this.state.searchQuery\r\n    const apiUrl = await fetch(`https://cors-anywhere.herokuapp.com/https://www.googleapis.com/youtube/v3/search?part=snippet&q=${searchQuery}&type=video&maxResults=${max_result}&key=${api_key}`)\r\n    const data = await apiUrl.json()\r\n    this.setState({totalResults: data.pageInfo.totalResults})\r\n    const items=data.items\r\n    const videoList = []\r\n    for (var i=0; i<items.length; i++) {\r\n      videoList[i]=[items[i].snippet.thumbnails.medium.url, items[i].snippet.title, items[i].snippet.channelTitle]\r\n    }\r\n    this.setState({videoList: videoList, searchQueryFilterBar: this.state.searchQuery})\r\n  }\r\n  render () {\r\n    return (\r\n      <div className=\"Home\">\r\n        <Header\r\n          route={this.state.route}\r\n          changeRouteHome={this.changeRouteHome}\r\n          changeRouteFavorites={this.changeRouteFavorites}\r\n          changeRouteExit={this.changeRouteExit}\r\n        />\r\n        {this.state.route === \"/Home\"\r\n          ?\r\n          <Main\r\n            // Высплывающее окно\r\n            indicatorFavorites={this.state.indicatorFavorites}\r\n            changeIndicatorPopupWindow={this.changeIndicatorPopupWindow}\r\n            indicatorPopUpWindow={this.state.indicatorPopUpWindow}\r\n            // Строка поиска\r\n            searchQuery={this.state.searchQuery}\r\n            inputSearchQuery={this.inputSearchQuery}\r\n            getListVideos={this.getListVideos}\r\n            changeIndicatorFavorites={this.changeIndicatorFavorites}\r\n            // Фильтр бар\r\n            searchQueryFilterBar={this.state.searchQueryFilterBar}\r\n            totalResults={this.state.totalResults}\r\n            changeIndicatorFilterX4={this.changeIndicatorFilterX4}\r\n            changeIndicatorFilterX1={this.changeIndicatorFilterX1}\r\n            // Таблица видео\r\n            videoList={this.state.videoList}\r\n            x4={this.state.x4}\r\n            x1={this.state.x1}\r\n          />\r\n          :\r\n          <Favorites\r\n            searchQueryMas={this.state.searchQueryMas}\r\n          />}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Home;\r\n"]},"metadata":{},"sourceType":"module"}